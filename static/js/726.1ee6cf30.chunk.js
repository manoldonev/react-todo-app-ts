"use strict";(self.webpackChunkreact_todo_app_ts=self.webpackChunkreact_todo_app_ts||[]).push([[726],{5726:function(e,n,r){r.r(n),r.d(n,{Tasks:function(){return E}});var t,a=r(6871),o=r(7873),i=r(885),s=r(9588),l=r(9852),c=r.n(l),d=r(9754),u=function(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)},p=r(348),h=(r(1350),r(2791)),m=r(1956),f=r(184),x=(0,h.forwardRef)((function(e,n){var r=e.children,t=e.className,a=e.swipeDirection;return(0,f.jsx)("div",{ref:n,className:"absolute flex items-center w-full h-full px-6 ".concat(a===m.LEFT?"justify-end":"justify-start"," ").concat(null!==t&&void 0!==t?t:""),children:r})})),g=(0,h.forwardRef)((function(e,n){var r=e.children,t=e.className,a=e.onMouseDown;return(0,f.jsx)("div",{onMouseDown:a,ref:n,role:"none",className:"touch-pan-y relative w-full h-full ".concat(null!==t&&void 0!==t?t:""),children:r})})),b=function(e){var n=e.children,r=e.leftChildren,t=e.rightChildren,a=e.threshold,o=void 0===a?.3:a,s=e.onSwipedLeft,l=e.onSwipedRight,c=e.onTap,d=e.leftChildrenClassName,u=e.rightChildrenClassName,p=e.className,b=(0,h.useRef)(null),v=(0,h.useRef)(null),y=(0,h.useState)(m.LEFT),j=(0,i.Z)(y,2),w=j[0],N=j[1],k=(0,h.useRef)(!1),C=(0,m.useSwipeable)({trackMouse:!1,onTap:c,onSwipeStart:function(e){k.current=e.dir===m.LEFT||e.dir===m.RIGHT,k.current&&b.current&&(b.current.style.transition="",b.current.style.transform="")},onSwiping:function(e){if(k.current){if(N(e.dir),b.current){var n="translateX(".concat(e.deltaX,"px)");b.current.style.transform=n}if(v.current){var r=Math.min(Math.abs(e.deltaX)/100,1);v.current.style.opacity=r.toFixed(2)}}},onSwiped:function(e){if(k.current&&b.current){var n=e.deltaX,r=b.current.offsetWidth;Math.abs(n)>=r*o?(n=e.dir===m.LEFT?2*-r:r,e.dir===m.LEFT&&s?s(e):e.dir===m.RIGHT&&l&&l(e)):n=0,b.current.style.transition="transform 0.5s ease-out",b.current.style.transform="translateX(".concat(n,"px)")}}});return(0,f.jsxs)("div",{className:"relative w-full overflow-hidden",children:[(0,f.jsx)(x,{ref:v,className:w===m.LEFT?u:d,swipeDirection:w,children:w===m.LEFT?t:r}),(0,f.jsx)(g,{ref:function(e){C.ref(e),b.current=e},className:p,onMouseDown:C.onMouseDown,children:n})]})},v=function(e){var n=e.className,r=void 0===n?"":n,t=e.onDelete;return(0,f.jsxs)("div",{className:"flex gap-1 justify-end text-on-primary-container ".concat(r),children:[(0,f.jsx)("button",{type:"button",className:"group",disabled:!0,"aria-label":"Set Reminder",children:(0,f.jsx)(s.Dkj,{className:"w-6 h-6 p-1 group-disabled:text-on-primary-container/25"})}),(0,f.jsx)("button",{type:"button",className:"group",disabled:!0,"aria-label":"Background Options",children:(0,f.jsx)(s.QLK,{className:"w-6 h-6 p-1 group-disabled:text-on-primary-container/25"})}),(0,f.jsx)("button",{type:"button",className:"group",disabled:!0,"aria-label":"Edit Item",children:(0,f.jsx)(s.sCx,{className:"w-6 h-6 p-1 group-disabled:text-on-primary-container/25"})}),(0,f.jsx)("button",{type:"button",onClick:t,"aria-label":"Delete Item",children:(0,f.jsx)(s.XHJ,{className:"w-6 h-6 p-1 hover:border hover:border-secondary rounded-xl hover:bg-secondary-container hover:text-on-secondary-container"})})]})},y=r(5861),j=r(7757),w=r.n(j),N=r(1933),k=r(6522),C=function(e){var n=e.data,r=(0,p.a)("(pointer: coarse)"),t=function(){var e=(0,N.useQueryClient)();return(0,k.wR)({onSuccess:function(){var n=(0,y.Z)(w().mark((function n(){return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.invalidateQueries("Todos.infinite"));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()})}(),a=t.mutate,o=function(){var e=(0,N.useQueryClient)();return(0,k.q)({onSuccess:function(){var n=(0,y.Z)(w().mark((function n(){return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.invalidateQueries("Todos.infinite"));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()})}(),i=o.mutate;if(null==n)return null;var l=function(){a({id:n.id,input:{done:!n.done}})},c=function(){i({id:n.id})};return r?(0,f.jsx)("li",{className:"w-full mb-3 last:mb-20 xs:w-56 md:w-60",children:(0,f.jsxs)(b,{className:"px-3 pb-3 transition-colors border rounded-lg border-outline bg-primary-container text-on-primary-container",onTap:l,onSwipedLeft:c,onSwipedRight:c,leftChildren:(0,f.jsx)(s.XHJ,{className:"w-6 h-6"}),leftChildrenClassName:"bg-error-container text-on-error-container border border-outline rounded-lg",rightChildren:(0,f.jsx)(s.XHJ,{className:"w-6 h-6"}),rightChildrenClassName:"bg-error-container text-on-error-container border border-outline rounded-lg",children:[(0,f.jsx)("h3",{className:"".concat(n.done?"line-through text-on-primary-container/60":""),children:"Lorem Ipsum #".concat(n.id)}),(0,f.jsx)("label",{className:"flex line-clamp-3 ".concat(n.done?"line-through text-on-primary-container/60":""),children:n.task})]})}):(0,f.jsx)("li",{className:"w-full mb-3 group last:mb-20 xs:w-56 md:w-60",children:(0,f.jsxs)("div",{className:"px-3 transition-colors border rounded-lg bg-primary-container border-outline text-on-primary-container",children:[(0,f.jsx)("h3",{className:"".concat(n.done?"line-through text-on-primary-container/60":""),children:"Lorem Ipsum #".concat(n.id)}),(0,f.jsxs)("label",{htmlFor:n.id,className:"flex line-clamp-3 ".concat(n.done?"line-through text-on-primary-container/60":""),children:[(0,f.jsx)("input",{type:"checkbox",className:"flex-initial mx-2 accent-secondary",id:n.id,checked:n.done,onChange:l}),n.task]}),(0,f.jsx)(v,{className:"my-1 transition-opacity duration-500 opacity-0 group-focus-within:opacity-100 group-hover:opacity-100",onDelete:c})]})})},T=r(8063),L=r(7229);!function(e){e.Ascending="asc",e.Descending="desc"}(t||(t={}));var S=t.Descending,F=function(){var e,n=function(){var e=(0,d.KO)(L.T),n=(0,i.Z)(e,1)[0],r=null;""!==n&&(r={task_contains:n});var t={page:1,limit:10,input:r,sort:"id",direction:S},a=(0,k.N5)("page",t,{getNextPageParam:function(e,n){return n.length<5?{page:n.length+1}:null}}),o=a.data,s=a.hasNextPage,l=a.fetchNextPage,c=a.isFetchingNextPage,p=a.isError,h=(0,T.Z)({loading:c,hasNextPage:null!==s&&void 0!==s&&s,onLoadMore:l,disabled:p,rootMargin:"0px 0px ".concat(u(6.25),"px 0px")});return{data:o,isFetching:c||null!==s&&void 0!==s&&s,sentryRef:(0,i.Z)(h,1)[0]}}(),r=n.data,t=n.isFetching,a=n.sentryRef,o=(0,d.KO)(L.T),l=(0,i.Z)(o,2),p=l[0],h=l[1],m={gutter:u(.75),stagger:"0.03s",horizontalOrder:!1};return(0,f.jsxs)("div",{className:"p-1.5 bg-background transition-colors min-h-screen",children:[(0,f.jsxs)(c(),{elementType:"ul",options:m,children:[null===r||void 0===r?void 0:r.pages.map((function(e){var n;return null===(n=e.todos)||void 0===n?void 0:n.map((function(e){return(0,f.jsx)(C,{data:e},null===e||void 0===e?void 0:e.id)}))})),t&&(0,f.jsx)("li",{ref:a,children:(0,f.jsx)("h3",{className:"text-on-background",children:"Loading..."})})]}),!t&&(0===(null===r||void 0===r?void 0:r.pages.length)||0===(null===r||void 0===r||null===(e=r.pages[0].todos)||void 0===e?void 0:e.length))&&(0,f.jsx)("div",{className:"flex items-center justify-center min-h-screen pb-40 text-on-background",children:(0,f.jsxs)("div",{className:"flex flex-col items-center",children:[(0,f.jsx)(s.kSp,{className:"w-40 h-40"}),(0,f.jsx)("span",{children:"No items available"}),""!==p&&(0,f.jsx)("button",{type:"button",onClick:function(){return h("")},className:"text-primary bg-background hover:text-on-primary border border-primary hover:bg-primary-variant focus:ring-4 focus:ring-primary/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center mt-2",children:"Reset Search"})]})})]})},R=r(9645),D=function(e){var n=e.className,r=void 0===n?"":n,t=(0,a.TH)(),o=(0,a.s0)(),i=(0,h.useRef)(null);return(0,R.Jd)(i,{headroomOptions:{classes:{initial:"transition-transform duration-300 will-change-transform",pinned:"translate-x-0",unpinned:"translate-x-[5rem]"}}}),(0,f.jsx)("button",{ref:i,type:"button","aria-label":"Add new item",onClick:function(){return o("/tasks/new",{state:{backgroundLocation:t}})},className:"text-on-secondary transition duration-200 ease-in bg-secondary rounded-full shadow w-14 h-14 hover:bg-secondary-variant active:shadow-lg focus:outline-none ".concat(r),children:(0,f.jsx)(s.pOD,{})})},E=function(){var e,n=(0,a.TH)(),r=n.state;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(a.Z5,{location:null!==(e=null===r||void 0===r?void 0:r.backgroundLocation)&&void 0!==e?e:n,children:[(0,f.jsx)(a.AW,{path:"/",element:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(F,{}),(0,f.jsx)(D,{className:"fixed z-10 md:bottom-8 bottom-24 right-6"})]})}),(0,f.jsx)(a.AW,{path:"/new",element:(0,f.jsx)(o.X1,{})})]}),(null===r||void 0===r?void 0:r.backgroundLocation)&&(0,f.jsx)(a.Z5,{children:(0,f.jsx)(a.AW,{path:"/new",element:(0,f.jsx)(o.VX,{})})})]})}}}]);
//# sourceMappingURL=726.1ee6cf30.chunk.js.map