"use strict";(self.webpackChunkreact_todo_app_ts=self.webpackChunkreact_todo_app_ts||[]).push([[726],{5726:function(e,n,t){t.r(n),t.d(n,{Tasks:function(){return R}});var r,a=t(6871),s=t(4779),o=t(9852),i=t.n(o),l=function(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)},d=t(9588),c=t(348),u=(t(1350),t(885)),h=t(2791),p=t(1956),f=t(184),x=(0,h.forwardRef)((function(e,n){var t=e.children,r=e.className,a=e.swipeDirection;return(0,f.jsx)("div",{ref:n,className:"absolute flex items-center w-full h-full px-6 ".concat(a===p.LEFT?"justify-end":"justify-start"," ").concat(null!==r&&void 0!==r?r:""),children:t})})),m=(0,h.forwardRef)((function(e,n){var t=e.children,r=e.className,a=e.onMouseDown;return(0,f.jsx)("div",{onMouseDown:a,ref:n,role:"none",className:"touch-pan-y relative w-full h-full ".concat(null!==r&&void 0!==r?r:""),children:t})})),b=function(e){var n=e.children,t=e.leftChildren,r=e.rightChildren,a=e.threshold,s=void 0===a?.3:a,o=e.onSwipedLeft,i=e.onSwipedRight,l=e.onTap,d=e.leftChildrenClassName,c=e.rightChildrenClassName,b=e.className,g=(0,h.useRef)(null),v=(0,h.useRef)(null),w=(0,h.useState)(p.LEFT),j=(0,u.Z)(w,2),N=j[0],y=j[1],F=(0,p.useSwipeable)({trackMouse:!1,onTap:l,onSwipeStart:function(){g.current&&(g.current.style.transition="",g.current.style.transform="")},onSwiping:function(e){if(g.current){var n="translateX(".concat(e.deltaX,"px)");g.current.style.transform=n}if(v.current){var t=Math.min(Math.abs(e.deltaX)/100,1);v.current.style.opacity=t.toFixed(2)}y(e.dir)},onSwiped:function(e){if(g.current){var n=e.deltaX,t=g.current.offsetWidth;Math.abs(n)>=t*s?(n=e.dir===p.LEFT?2*-t:t,e.dir===p.LEFT&&o?o(e):e.dir===p.RIGHT&&i&&i(e)):n=0,g.current.style.transition="transform 0.5s ease-out",g.current.style.transform="translateX(".concat(n,"px)")}}});return(0,f.jsxs)("div",{className:"relative w-full overflow-hidden",children:[(0,f.jsx)(x,{ref:v,className:N===p.LEFT?c:d,swipeDirection:N,children:N===p.LEFT?r:t}),(0,f.jsx)(m,{ref:function(e){F.ref(e),g.current=e},className:b,onMouseDown:F.onMouseDown,children:n})]})},g=function(e){var n=e.className,t=void 0===n?"":n,r=e.onDelete;return(0,f.jsxs)("div",{className:"flex gap-1 justify-end ".concat(t),children:[(0,f.jsx)("button",{type:"button",className:"group",disabled:!0,"aria-label":"Set Reminder",children:(0,f.jsx)(d.Dkj,{className:"w-6 h-6 p-1 group-disabled:text-slate-300 enabled:hover:border enabled:hover:border-gray-400 rounded-xl enabled:hover:bg-slate-300"})}),(0,f.jsx)("button",{type:"button",className:"group",disabled:!0,"aria-label":"Background Options",children:(0,f.jsx)(d.QLK,{className:"w-6 h-6 p-1 group-disabled:text-slate-300 enabled:hover:border enabled:hover:border-gray-400 rounded-xl enabled:hover:bg-slate-300"})}),(0,f.jsx)("button",{type:"button",className:"group",disabled:!0,"aria-label":"Edit Item",children:(0,f.jsx)(d.sCx,{className:"w-6 h-6 p-1 group-disabled:text-slate-300 enabled:hover:border enabled:hover:border-gray-400 rounded-xl enabled:hover:bg-slate-300"})}),(0,f.jsx)("button",{type:"button",onClick:r,"aria-label":"Delete Item",children:(0,f.jsx)(d.XHJ,{className:"w-6 h-6 p-1 hover:border hover:border-gray-400 rounded-xl hover:bg-slate-300"})})]})},v=t(5861),w=t(7757),j=t.n(w),N=t(1933),y=t(6522),F=function(e){var n=e.data,t=(0,c.a)("(pointer: coarse)"),r=function(){var e=(0,N.useQueryClient)();return(0,y.wR)({onSuccess:function(){var n=(0,v.Z)(j().mark((function n(){return j().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.invalidateQueries("Todos.infinite"));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()})}(),a=r.mutate,s=function(){var e=(0,N.useQueryClient)();return(0,y.q)({onSuccess:function(){var n=(0,v.Z)(j().mark((function n(){return j().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.invalidateQueries("Todos.infinite"));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()})}(),o=s.mutate;if(null==n)return null;var i=function(){a({id:n.id,input:{done:!n.done}})},l=function(){o({id:n.id})};return t?(0,f.jsx)("li",{className:"w-full mb-3 last:mb-20 xs:w-56 md:w-60",children:(0,f.jsxs)(b,{className:"bg-[#F5F9FF] border rounded-lg border-slate-300 px-3 pb-3",onTap:i,onSwipedLeft:l,onSwipedRight:l,leftChildren:(0,f.jsx)(d.XHJ,{className:"w-6 h-6"}),leftChildrenClassName:"bg-red-700 text-white border rounded-lg",rightChildren:(0,f.jsx)(d.XHJ,{className:"w-6 h-6"}),rightChildrenClassName:"bg-red-700 text-white border rounded-lg",children:[(0,f.jsx)("h3",{className:"".concat(n.done?"line-through text-[#6B7385]":""),children:"Lorem Ipsum #".concat(n.id)}),(0,f.jsx)("label",{className:"flex line-clamp-3 ".concat(n.done?"line-through text-[#6B7385]":""),children:n.task})]})}):(0,f.jsx)("li",{className:"w-full mb-3 group last:mb-20 xs:w-56 md:w-60",children:(0,f.jsxs)("div",{className:"px-3 border rounded-lg bg-[#F5F9FF] border-slate-300",children:[(0,f.jsx)("h3",{className:"".concat(n.done?"line-through text-[#6B7385]":""),children:"Lorem Ipsum #".concat(n.id)}),(0,f.jsxs)("label",{htmlFor:n.id,className:"flex line-clamp-3 ".concat(n.done?"line-through text-[#6B7385]":""),children:[(0,f.jsx)("input",{type:"checkbox",className:"flex-initial mx-2",id:n.id,checked:n.done,onChange:i}),n.task]}),(0,f.jsx)(g,{className:"group-focus-within:opacity-100 group-hover:opacity-100 mt-1.5 opacity-0 transition-opacity duration-500",onDelete:l})]})})},k=t(8063),C=t(9754),T=t(7229);!function(e){e.Ascending="asc",e.Descending="desc"}(r||(r={}));var L=r.Descending,S=function(){var e=function(){var e=(0,C.KO)(T.T),n=(0,u.Z)(e,1)[0],t=null;""!==n&&(t={task_contains:n});var r={page:1,limit:10,input:t,sort:"id",direction:L},a=(0,y.N5)("page",r,{getNextPageParam:function(e,n){return n.length<5?{page:n.length+1}:null}}),s=a.data,o=a.hasNextPage,i=a.fetchNextPage,d=a.isFetchingNextPage,c=a.isError,h=(0,k.Z)({loading:d,hasNextPage:null!==o&&void 0!==o&&o,onLoadMore:i,disabled:c,rootMargin:"0px 0px ".concat(l(6.25),"px 0px")});return{data:s,isFetching:d||null!==o&&void 0!==o&&o,sentryRef:(0,u.Z)(h,1)[0]}}(),n=e.data,t=e.isFetching,r=e.sentryRef,a={gutter:l(.75),stagger:"0.03s",horizontalOrder:!1};return(0,f.jsx)("div",{className:"p-1.5",children:(0,f.jsxs)(i(),{elementType:"ul",options:a,children:[null===n||void 0===n?void 0:n.pages.map((function(e){var n;return null===(n=e.todos)||void 0===n?void 0:n.map((function(e){return(0,f.jsx)(F,{data:e},null===e||void 0===e?void 0:e.id)}))})),t&&(0,f.jsx)("li",{ref:r,children:(0,f.jsx)("h3",{children:"Loading..."})})]})})},D=function(e){var n=e.className,t=void 0===n?"":n,r=(0,a.TH)(),s=(0,a.s0)();return(0,f.jsx)("button",{type:"button","aria-label":"Add new item",onClick:function(){return s("/tasks/new",{state:{backgroundLocation:r}})},className:"text-white transition duration-200 ease-in bg-blue-500 rounded-full shadow w-14 h-14 hover:bg-blue-700 active:shadow-lg focus:outline-none ".concat(t),children:(0,f.jsx)(d.pOD,{})})},R=function(){var e,n=(0,a.TH)(),t=n.state;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(a.Z5,{location:null!==(e=null===t||void 0===t?void 0:t.backgroundLocation)&&void 0!==e?e:n,children:[(0,f.jsx)(a.AW,{path:"/",element:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(S,{}),(0,f.jsx)(D,{className:"fixed z-10 md:bottom-8 bottom-24 right-6"})]})}),(0,f.jsx)(a.AW,{path:"/new",element:(0,f.jsx)(s.X1,{})})]}),(null===t||void 0===t?void 0:t.backgroundLocation)&&(0,f.jsx)(a.Z5,{children:(0,f.jsx)(a.AW,{path:"/new",element:(0,f.jsx)(s.VX,{})})})]})}}}]);
//# sourceMappingURL=726.6e94154a.chunk.js.map