"use strict";(self.webpackChunkreact_todo_app_ts=self.webpackChunkreact_todo_app_ts||[]).push([[407],{2407:function(e,n,t){t.r(n),t.d(n,{Tasks:function(){return I}});var r,a=t(6871),o=t(595),i=t(885),s=t(4175),l=t(9852),c=t.n(l),d=t(9754),u=function(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)},h=t(803),m=t(348),p=t(2791),f=t(1956),x=t(184),g=(0,p.forwardRef)((function(e,n){var t=e.children,r=e.className,a=e.swipeDirection;return(0,x.jsx)("div",{ref:n,className:"absolute flex items-center w-full h-full px-6 ".concat(a===f.LEFT?"justify-end":"justify-start"," ").concat(null!==r&&void 0!==r?r:""),children:t})})),b=(0,p.forwardRef)((function(e,n){var t=e.children,r=e.className,a=e.onMouseDown;return(0,x.jsx)("div",{onMouseDown:a,ref:n,role:"none",className:"touch-pan-y relative w-full h-full ".concat(null!==r&&void 0!==r?r:""),children:t})})),v=function(e){var n=e.children,t=e.leftChildren,r=e.rightChildren,a=e.threshold,o=void 0===a?.3:a,s=e.onSwipedLeft,l=e.onSwipedRight,c=e.onTap,d=e.leftChildrenClassName,u=e.rightChildrenClassName,h=e.className,m=(0,p.useRef)(null),v=(0,p.useRef)(null),y=(0,p.useState)(f.LEFT),j=(0,i.Z)(y,2),w=j[0],N=j[1],k=(0,p.useRef)(!1),C=(0,f.useSwipeable)({trackMouse:!1,onTap:c,onSwipeStart:function(e){k.current=e.dir===f.LEFT||e.dir===f.RIGHT,k.current&&m.current&&(m.current.style.transition="",m.current.style.transform="")},onSwiping:function(e){if(k.current){if(N(e.dir),m.current){var n="translateX(".concat(e.deltaX,"px)");m.current.style.transform=n}if(v.current){var t=Math.min(Math.abs(e.deltaX)/100,1);v.current.style.opacity=t.toFixed(2)}}},onSwiped:function(e){if(k.current&&m.current){var n=e.deltaX,t=m.current.offsetWidth;Math.abs(n)>=t*o?(n=e.dir===f.LEFT?2*-t:t,e.dir===f.LEFT&&s?s(e):e.dir===f.RIGHT&&l&&l(e)):n=0,m.current.style.transition="transform 0.5s ease-out",m.current.style.transform="translateX(".concat(n,"px)")}}});return(0,x.jsxs)("div",{className:"relative w-full overflow-hidden",children:[(0,x.jsx)(g,{ref:v,className:w===f.LEFT?u:d,swipeDirection:w,children:w===f.LEFT?r:t}),(0,x.jsx)(b,{ref:function(e){C.ref(e),m.current=e},className:h,onMouseDown:C.onMouseDown,children:n})]})},y=t(4410),j=t(2105),w=t(7600),N=function(e){var n=e.className,t=void 0===n?"":n,r=e.onDelete;return(0,x.jsxs)("div",{className:"flex gap-1 justify-end text-on-primary-container ".concat(t),children:[(0,x.jsx)("button",{type:"button",className:"group",disabled:!0,"aria-label":"Set Reminder",children:(0,x.jsx)(y.Z,{className:"w-6 h-6 p-1 group-disabled:text-on-primary-container/25"})}),(0,x.jsx)("button",{type:"button",className:"group",disabled:!0,"aria-label":"Background Options",children:(0,x.jsx)(j.Z,{className:"w-6 h-6 p-1 group-disabled:text-on-primary-container/25"})}),(0,x.jsx)("button",{type:"button",className:"group",disabled:!0,"aria-label":"Edit Item",children:(0,x.jsx)(w.Z,{className:"w-6 h-6 p-1 group-disabled:text-on-primary-container/25"})}),(0,x.jsx)("button",{type:"button",onClick:r,"aria-label":"Delete Item",children:(0,x.jsx)(h.Z,{className:"w-6 h-6 p-1 hover:border hover:border-secondary rounded-xl hover:bg-secondary-container hover:text-on-secondary-container"})})]})},k=t(5861),C=t(7757),T=t.n(C),Z=t(1933),L=t(6522),S=function(e){var n=e.data,t=(0,m.a)("(pointer: coarse)"),r=function(){var e=(0,Z.useQueryClient)();return(0,L.wR)({onSuccess:function(){var n=(0,k.Z)(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.invalidateQueries("Todos.infinite"));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()})}(),a=r.mutate,o=function(){var e=(0,Z.useQueryClient)();return(0,L.q)({onSuccess:function(){var n=(0,k.Z)(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.invalidateQueries("Todos.infinite"));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()})}(),i=o.mutate;if(null==n)return null;var s=function(){a({id:n.id,input:{done:!n.done}})},l=function(){i({id:n.id})};return t?(0,x.jsx)("li",{className:"w-full mb-3 last:mb-20 xs:w-56 md:w-60",children:(0,x.jsxs)(v,{className:"px-3 pb-3 transition-colors border rounded-lg border-outline bg-primary-container text-on-primary-container",onTap:s,onSwipedLeft:l,onSwipedRight:l,leftChildren:(0,x.jsx)(h.Z,{className:"w-6 h-6"}),leftChildrenClassName:"bg-error-container text-on-error-container border border-outline rounded-lg",rightChildren:(0,x.jsx)(h.Z,{className:"w-6 h-6"}),rightChildrenClassName:"bg-error-container text-on-error-container border border-outline rounded-lg",children:[(0,x.jsx)("h3",{className:"".concat(n.done?"line-through text-on-primary-container/60":""),children:"Lorem Ipsum #".concat(n.id)}),(0,x.jsx)("label",{className:"flex line-clamp-3 ".concat(n.done?"line-through text-on-primary-container/60":""),children:n.task})]})}):(0,x.jsx)("li",{className:"w-full mb-3 group last:mb-20 xs:w-56 md:w-60",children:(0,x.jsxs)("div",{className:"px-3 transition-colors border rounded-lg bg-primary-container border-outline text-on-primary-container",children:[(0,x.jsx)("h3",{className:"".concat(n.done?"line-through text-on-primary-container/60":""),children:"Lorem Ipsum #".concat(n.id)}),(0,x.jsxs)("label",{htmlFor:n.id,className:"flex line-clamp-3 ".concat(n.done?"line-through text-on-primary-container/60":""),children:[(0,x.jsx)("input",{type:"checkbox",className:"flex-initial mx-2 accent-secondary",id:n.id,checked:n.done,onChange:s}),n.task]}),(0,x.jsx)(N,{className:"my-1 transition-opacity duration-500 opacity-0 group-focus-within:opacity-100 group-hover:opacity-100",onDelete:l})]})})},F=t(8063),R=t(3253);!function(e){e.Ascending="asc",e.Descending="desc"}(r||(r={}));var D=r.Descending,E=function(){var e,n=function(){var e=(0,d.KO)(R.T),n=(0,i.Z)(e,1)[0],t=null;""!==n&&(t={task_contains:n});var r={page:1,limit:10,input:t,sort:"id",direction:D},a=(0,L.N5)("page",r,{getNextPageParam:function(e,n){return n.length<5?{page:n.length+1}:null}}),o=a.data,s=a.hasNextPage,l=a.fetchNextPage,c=a.isFetchingNextPage,h=a.isError,m=(0,F.Z)({loading:c,hasNextPage:null!==s&&void 0!==s&&s,onLoadMore:l,disabled:h,rootMargin:"0px 0px ".concat(u(6.25),"px 0px")});return{data:o,isFetching:c||null!==s&&void 0!==s&&s,sentryRef:(0,i.Z)(m,1)[0]}}(),t=n.data,r=n.isFetching,a=n.sentryRef,o=(0,d.KO)(R.T),l=(0,i.Z)(o,2),h=l[0],m=l[1],p={gutter:u(.75),stagger:"0.03s",horizontalOrder:!1};return(0,x.jsxs)("div",{className:"p-1.5 bg-background transition-colors min-h-screen",children:[(0,x.jsxs)(c(),{elementType:"ul",options:p,"data-testid":"todo-list",children:[null===t||void 0===t?void 0:t.pages.map((function(e){var n;return null===(n=e.todos)||void 0===n?void 0:n.map((function(e){return(0,x.jsx)(S,{data:e},null===e||void 0===e?void 0:e.id)}))})),r&&(0,x.jsx)("li",{ref:a,role:"none",children:(0,x.jsx)("h3",{className:"text-on-background",children:"Loading..."})})]}),!r&&(0===(null===t||void 0===t?void 0:t.pages.length)||0===(null===t||void 0===t||null===(e=t.pages[0].todos)||void 0===e?void 0:e.length))&&(0,x.jsx)("div",{className:"flex items-center justify-center min-h-screen pb-40 text-on-background",children:(0,x.jsxs)("div",{className:"flex flex-col items-center",children:[(0,x.jsx)(s.Z,{className:"w-40 h-40"}),(0,x.jsx)("span",{children:"No items available"}),""!==h&&(0,x.jsx)("button",{type:"button",onClick:function(){return m("")},className:"text-secondary bg-background hover:text-on-secondary border border-secondary outline-none hover:bg-secondary-variant focus:ring-4 focus:ring-secondary/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center mt-2",children:"Reset Search"})]})})]})},M=t(2076),X=t(9645),_=function(e){var n=e.className,t=void 0===n?"":n,r=(0,a.TH)(),o=(0,a.s0)(),i=(0,p.useRef)(null);return(0,X.Jd)(i,{headroomOptions:{classes:{initial:"transition-transform duration-300 will-change-transform",pinned:"translate-x-0",unpinned:"translate-x-[5rem]"}}}),(0,x.jsx)("button",{ref:i,type:"button","aria-label":"Add new item",onClick:function(){return o("/tasks/new",{state:{backgroundLocation:r}})},className:"text-on-secondary transition duration-200 ease-in bg-secondary rounded-full shadow w-14 h-14 hover:bg-secondary-variant active:shadow-lg focus:outline-none ".concat(t),children:(0,x.jsx)(M.Z,{})})},I=function(){var e,n=(0,a.TH)(),t=n.state;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(a.Z5,{location:null!==(e=null===t||void 0===t?void 0:t.backgroundLocation)&&void 0!==e?e:n,children:[(0,x.jsx)(a.AW,{path:"/",element:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(E,{}),(0,x.jsx)(_,{className:"fixed z-10 md:bottom-8 bottom-24 right-6"})]})}),(0,x.jsx)(a.AW,{path:"/new",element:(0,x.jsx)(o.X1,{})})]}),(null===t||void 0===t?void 0:t.backgroundLocation)&&(0,x.jsx)(a.Z5,{children:(0,x.jsx)(a.AW,{path:"/new",element:(0,x.jsx)(o.VX,{})})})]})}}}]);
//# sourceMappingURL=407.a0e0ed20.chunk.js.map